sudo: false

language: php

env:
  global:
    - WP_CLI_BIN_DIR=/tmp/wp-cli-phar

matrix:
  include:
    - php: 5.6
      env: WP_VERSION=latest TEST_PACKAGE=all
    - php: 5.6
      env: WP_VERSION=latest TEST_PHAR=nightly
    - php: 5.6
      env: WP_VERSION=latest TEST_PHAR=stable
  allow_failures:
    - php: 5.6
      env: WP_VERSION=latest TEST_PHAR=stable

before_script:
  - ./ci/prepare.sh

script: ./ci/test.sh

after_success: ./ci/deploy.sh

cache:
  directories:
  - vendor
  - $HOME/.composer/cache

branches:
  only:
    - master

notifications:
  email:
    on_success: never
    on_failure: change
  slack:
    secure: aoy2Qzi3LKS4eJvi81k7pySuiZ8Ec9j8Qtgl5YwDcNahBwJz1hBr4WXbXlGcmuNwCd5vrGmlDEmSk8/NNidqqTop0IvvINWBCP15D1743PcSyXj9C1etC5F1f4++rEm1VZ45KPrm4Q5mFA2ZwNDN/8qycVZZxpRMEpw58FCRADH2bfKsV/8PsivBREWchYrI8PHUh6NnZQwznFBUoHXNfvFab8D5qfV/E9dF5uAVFSBX6uabURXyroP1C8H0tvCUaCa/7nhme3vgDYTEMjRpXnUUzJFOo85AjBEA5GU0ghe0YeRPabqW9ffDSAwkh6yrymlXM/gNlTfK9ag/HuTctKHN4uV8q7AXr8x48VCiXTN9WvI2OqN/xBbMH8cGx9oRTkd56bzu/zEO2oyrljGAYGFIYZuUHDKyeHyLas60wvuAeZFAsH38HR10k8LT91nNbH8ap00hALX03eQMajBe5tIQnuT6AmY1lYm+MwZ15XeVQ6bnS0laI1nrrnqDIzqplBsVrq5NsUAIEc7YSmo/1oOr3gDPzZs08stKPRFyUbfPqDQ2Q5zdKHSdUyQxSOUE/WbFbGPnjKCE0jhqNLgOJ6AdRQPnOE9qrXX21ccxRhLaMniTpTtupjACEex4vzTcz7DhpB4xgpZI/DjZyBy+xOszfsezTejfupUpEdmMb7A=
